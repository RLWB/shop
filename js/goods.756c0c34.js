(window.webpackJsonp=window.webpackJsonp||[]).push([["goods"],{"12ff":function(e,t,r){e.exports=function(){"use strict";return function(e,t,r){e=e||{};var o=t.prototype,n={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(e,t,r,n){return o.fromToBase(e,t,r,n)}r.en.relativeTime=n,o.fromToBase=function(t,o,a,i,s){for(var l,u,c,d=a.$locale().relativeTime||n,f=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],p=f.length,m=0;m<p;m+=1){var h=f[m];h.d&&(l=i?r(t).diff(a,h.d,!0):a.diff(t,h.d,!0));var g=(e.rounding||Math.round)(Math.abs(l));if(c=l>0,g<=h.r||!h.r){g<=1&&m>0&&(h=f[m-1]);var b=d[h.l];s&&(g=s(""+g)),u="string"==typeof b?b.replace("%d",g):b(g,o,h.l,c);break}}if(o)return u;var v=c?d.future:d.past;return"function"==typeof v?v(u):v.replace("%s",u)},o.to=function(e,t){return a(e,t,this,!0)},o.from=function(e,t){return a(e,t,this)};var i=function(e){return e.$u?r.utc():r()};o.toNow=function(e){return this.to(i(this),e)},o.fromNow=function(e){return this.from(i(this),e)}}}()},14726:function(e,t,r){e.exports=function(){"use strict";var e="millisecond",t="second",r="minute",o="hour",n="day",a="week",i="month",s="quarter",l="year",u="date",c=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},p=function(e,t,r){var o=String(e);return!o||o.length>=t?e:""+Array(t+1-o.length).join(r)+e},m={s:p,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),o=Math.floor(r/60),n=r%60;return(t<=0?"+":"-")+p(o,2,"0")+":"+p(n,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var o=12*(r.year()-t.year())+(r.month()-t.month()),n=t.clone().add(o,i),a=r-n<0,s=t.clone().add(o+(a?-1:1),i);return+(-(o+(r-n)/(a?n-s:s-n))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(c){return{M:i,y:l,w:a,d:n,D:u,h:o,m:r,s:t,ms:e,Q:s}[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},h="en",g={};g[h]=f;var b=function(e){return e instanceof $},v=function(e,t,r){var o;if(!e)return h;if("string"==typeof e)g[e]&&(o=e),t&&(g[e]=t,o=e);else{var n=e.name;g[n]=e,o=n}return!r&&o&&(h=o),o||!r&&h},_=function(e,t){if(b(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new $(r)},y=m;y.l=v,y.i=b,y.w=function(e,t){return _(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var $=function(){function f(e){this.$L=v(e.locale,null,!0),this.parse(e)}var p=f.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(y.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var o=t.match(c);if(o){var n=o[2]-1||0,a=(o[7]||"0").substring(0,3);return r?new Date(Date.UTC(o[1],n,o[3]||1,o[4]||0,o[5]||0,o[6]||0,a)):new Date(o[1],n,o[3]||1,o[4]||0,o[5]||0,o[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return y},p.isValid=function(){return!("Invalid Date"===this.$d.toString())},p.isSame=function(e,t){var r=_(e);return this.startOf(t)<=r&&r<=this.endOf(t)},p.isAfter=function(e,t){return _(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<_(e)},p.$g=function(e,t,r){return y.u(e)?this[t]:this.set(r,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,s){var c=this,d=!!y.u(s)||s,f=y.p(e),p=function(e,t){var r=y.w(c.$u?Date.UTC(c.$y,t,e):new Date(c.$y,t,e),c);return d?r:r.endOf(n)},m=function(e,t){return y.w(c.toDate()[e].apply(c.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(t)),c)},h=this.$W,g=this.$M,b=this.$D,v="set"+(this.$u?"UTC":"");switch(f){case l:return d?p(1,0):p(31,11);case i:return d?p(1,g):p(0,g+1);case a:var _=this.$locale().weekStart||0,$=(h<_?h+7:h)-_;return p(d?b-$:b+(6-$),g);case n:case u:return m(v+"Hours",0);case o:return m(v+"Minutes",1);case r:return m(v+"Seconds",2);case t:return m(v+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(a,s){var c,d=y.p(a),f="set"+(this.$u?"UTC":""),p=(c={},c[n]=f+"Date",c[u]=f+"Date",c[i]=f+"Month",c[l]=f+"FullYear",c[o]=f+"Hours",c[r]=f+"Minutes",c[t]=f+"Seconds",c[e]=f+"Milliseconds",c)[d],m=d===n?this.$D+(s-this.$W):s;if(d===i||d===l){var h=this.clone().set(u,1);h.$d[p](m),h.init(),this.$d=h.set(u,Math.min(this.$D,h.daysInMonth())).$d}else p&&this.$d[p](m);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[y.p(e)]()},p.add=function(e,s){var u,c=this;e=Number(e);var d=y.p(s),f=function(t){var r=_(c);return y.w(r.date(r.date()+Math.round(t*e)),c)};if(d===i)return this.set(i,this.$M+e);if(d===l)return this.set(l,this.$y+e);if(d===n)return f(1);if(d===a)return f(7);var p=(u={},u[r]=6e4,u[o]=36e5,u[t]=1e3,u)[d]||1,m=this.$d.getTime()+e*p;return y.w(m,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this;if(!this.isValid())return"Invalid Date";var r=e||"YYYY-MM-DDTHH:mm:ssZ",o=y.z(this),n=this.$locale(),a=this.$H,i=this.$m,s=this.$M,l=n.weekdays,u=n.months,c=function(e,o,n,a){return e&&(e[o]||e(t,r))||n[o].substr(0,a)},f=function(e){return y.s(a%12||12,e,"0")},p=n.meridiem||function(e,t,r){var o=e<12?"AM":"PM";return r?o.toLowerCase():o},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:y.s(s+1,2,"0"),MMM:c(n.monthsShort,s,u,3),MMMM:c(u,s),D:this.$D,DD:y.s(this.$D,2,"0"),d:String(this.$W),dd:c(n.weekdaysMin,this.$W,l,2),ddd:c(n.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(a),HH:y.s(a,2,"0"),h:f(1),hh:f(2),a:p(a,i,!0),A:p(a,i,!1),m:String(i),mm:y.s(i,2,"0"),s:String(this.$s),ss:y.s(this.$s,2,"0"),SSS:y.s(this.$ms,3,"0"),Z:o};return r.replace(d,(function(e,t){return t||m[e]||o.replace(":","")}))},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(e,u,c){var d,f=y.p(u),p=_(e),m=6e4*(p.utcOffset()-this.utcOffset()),h=this-p,g=y.m(this,p);return g=(d={},d[l]=g/12,d[i]=g,d[s]=g/3,d[a]=(h-m)/6048e5,d[n]=(h-m)/864e5,d[o]=h/36e5,d[r]=h/6e4,d[t]=h/1e3,d)[f]||h,c?g:y.a(g)},p.daysInMonth=function(){return this.endOf(i).$D},p.$locale=function(){return g[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),o=v(e,t,!0);return o&&(r.$L=o),r},p.clone=function(){return y.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},f}(),w=$.prototype;return _.prototype=w,[["$ms",e],["$s",t],["$m",r],["$H",o],["$W",n],["$M",i],["$y",l],["$D",u]].forEach((function(e){w[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),_.extend=function(e,t){return e.$i||(e(t,$,_),e.$i=!0),_},_.locale=v,_.isDayjs=b,_.unix=function(e){return _(1e3*e)},_.en=g[h],_.Ls=g,_.p={},_}()},"1b62":function(e,t,r){"use strict";t.a={created:function(){console.log("Hello Mixin!")}}},8629:function(e,t,r){"use strict";r.r(t);var o=r("efe2"),n=r("4833"),a=(r("6dbb"),r("e0e8"),r("9113"),r("5c04"),r("6a61"),r("14726")),i=r.n(a),s=r("12ff"),l=r.n(s),u=(r("e7f4"),r("7c98"),r("1b62"));i.a.extend(l.a);var c={mixins:[u.a],data:function(){return{breadcrumbs:[{title:"首页",name:"Home"},{title:"商品管理"},{title:"商品列表"}],searchForm:{query:""},obj:null,params:{query:"",pagenum:1,pagesize:2},loading:!0,addDialog:!1,addForm:{username:"",password:"",email:"",mobile:""},addRules:null,formLabelWidth:"120px",roleDialog:!1,roleForm:{username:"",id:"",rid:"",roles:[]},json_fields:{"角色名称":"role_name"}}},methods:{getUsers:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$apis.getUsers(e.params);case 4:r=t.sent,e.obj=r,e.loading=!1,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e.loading=!1;case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},sizeChange:function(e){this.params.pagesize=e,this.$router.replace({name:this.$route.name,query:Object(o.a)(Object(o.a)({},this.$route.query),{},{pagesize:e})}),this.getUsers()},currentChange:function(e){this.params.pagenum=e,this.$router.replace({name:this.$route.name,query:Object(o.a)(Object(o.a)({},this.$route.query),{},{pagenum:e})}),this.getUsers()},handleIndex:function(e){return(this.params.pagenum-1)*this.params.pagesize+e+1},search:function(){this.$router.replace({query:Object(o.a)(Object(o.a)({},this.$route.query),{},{query:this.searchForm.query,pagenum:1}),name:this.$route.name}),this.params=Object(o.a)(Object(o.a)(Object(o.a)({},this.params),this.searchForm),{},{pagenum:1}),this.getUsers()},handleSwitchChange:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=e.id,n=e.mg_state,r.next=3,t.$apis.updateState({id:o,mg_state:n});case 3:t.getUsers();case 4:case"end":return r.stop()}}),r)})))()},showRoleDialog:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.roleForm.username=e.username,t.roleForm.id=e.id,r.next=4,t.$apis.getUserInfo(e.id);case 4:return o=r.sent,r.next=7,t.$apis.getRoles();case 7:n=r.sent,t.roleForm.rid=o.rid,t.roleForm.roles=n,t.roleDialog=!0;case 11:case"end":return r.stop()}}),r)})))()},editRole:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$apis.editRole(e.roleForm);case 2:e.roleDialog=!1;case 3:case"end":return t.stop()}}),t)})))()},toAddGoods:function(){this.$router.push({name:"Addgoods"})}},filters:{dealDate:function(e){return i()().locale("zh-cn").to(i()(e))}},created:function(){var e=this.$route.query,t=e.query,r=e.pagenum,o=e.pagesize;this.params=Object.assign(this.params,{query:t||"",pagesize:o?Number(o):2,pagenum:r?Number(r):1}),this.searchForm=Object.assign(this.searchForm,{query:t}),this.getUsers()}},d=r("4ac2"),f=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.obj?r("div",{staticClass:"goods"},[r("AdminBreadcrumb",{attrs:{breadcrumbs:e.breadcrumbs}}),r("el-form",{ref:"form",staticStyle:{"margin-top":"15px"},attrs:{model:e.searchForm,"label-width":"80px",inline:""},nativeOn:{submit:function(e){e.preventDefault()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}}},[r("el-form-item",[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.searchForm.query,callback:function(t){e.$set(e.searchForm,"query",t)},expression:"searchForm.query"}},[r("el-button",{attrs:{slot:"append",type:"primary",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.toAddGoods}},[e._v("添加商品")])],1),r("el-form-item",[r("download-excel",{attrs:{data:e.obj.users,name:"filename.xls",fields:e.json_fields}},[r("el-button",{attrs:{type:"primary"}},[e._v("导出用户")])],1)],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-background":"rgba(255, 255, 255, 1)","element-loading-text":"正在加载中",data:e.obj.users,border:""}},[r("el-table-column",{attrs:{type:"index",index:e.handleIndex}}),r("el-table-column",{attrs:{prop:"username",label:"姓名",width:"180"}}),r("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"180"}}),r("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),r("el-table-column",{attrs:{label:"创建日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("dealDate")(t.row.create_time))+" ")]}}],null,!1,3627082770)}),r("el-table-column",{attrs:{label:"用户状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(r){return e.handleSwitchChange(t.row)}},model:{value:t.row.mg_state,callback:function(r){e.$set(t.row,"mg_state",r)},expression:"scope.row.mg_state"}})]}}],null,!1,2842968011)}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",circle:"",icon:"el-icon-edit",size:"small"}}),r("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:"",size:"small"},on:{click:function(r){return e.showRoleDialog(t.row)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"small"}})]}}],null,!1,3027374321)})],1),r("el-pagination",{attrs:{"page-sizes":[1,2,5,10],"page-size":e.params.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.obj.total,"current-page":e.params.pagenum},on:{"size-change":e.sizeChange,"current-change":e.currentChange}}),r("Page",{attrs:{total:e.obj.total,current:e.params.pagenum,"page-size-opts":[1,2,5,10],"page-size":e.params.pagesize,size:"small","show-elevator":"","show-sizer":"","show-total":""},on:{"on-page-size-change":e.sizeChange,"on-change":e.currentChange}}),r("el-dialog",{attrs:{title:"新增用户",visible:e.addDialog},on:{"update:visible":function(t){e.addDialog=t}}},[r("el-form",{attrs:{model:e.addForm,rules:e.addRules}},[r("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth,prop:"username"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1),r("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth,prop:"password"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1),r("el-form-item",{attrs:{label:"电话","label-width":e.formLabelWidth,prop:"mobile"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.addForm.mobile,callback:function(t){e.$set(e.addForm,"mobile",t)},expression:"addForm.mobile"}})],1),r("el-form-item",{attrs:{label:"邮箱","label-width":e.formLabelWidth,prop:"email"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email",t)},expression:"addForm.email"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialog=!1}}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"分配角色",visible:e.roleDialog},on:{"update:visible":function(t){e.roleDialog=t}}},[r("el-form",{attrs:{model:e.roleForm,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"用户名"}},[r("el-input",{attrs:{disabled:""},model:{value:e.roleForm.username,callback:function(t){e.$set(e.roleForm,"username",t)},expression:"roleForm.username"}})],1),r("el-form-item",{attrs:{label:"角色"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.roleForm.rid,callback:function(t){e.$set(e.roleForm,"rid",t)},expression:"roleForm.rid"}},[r("el-option",{attrs:{label:"请选择",value:-1}}),e._l(e.roleForm.roles,(function(e){return r("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})}))],2)],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.roleDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editRole}},[e._v("确 定")])],1)],1)],1):e._e()}),[],!1,null,"13358db0",null);t.default=f.exports},c425:function(e,t,r){"use strict";r.r(t);var o=r("e7e7"),n=r("efe2"),a=r("4833"),i=(r("6a61"),r("6dbb"),r("e0e8"),r("9113"),r("7f0d"),r("e116"),r("74e1"),r("4d1d"),r("5cb1"),{data:function(){return{cropperOption:{img:"",info:!0,autoCrop:!0},clipDialogStatus:!1,option:{img:"",info:!0,outputSize:.8,outputType:"jpeg",canScale:!1,autoCrop:!0,fixedBox:!0,fixed:!0,fixedNumber:[7,5],full:!0,canMoveBox:!0,original:!1,centerBox:!1,infoTrue:!0},breadcrumbs:[{title:"首页",name:"Home"},{title:"商品管理"},{title:"商品列表"}],actived:"0",goodsInfo:{goods_name:"",goods_price:"",goods_weight:"",goods_number:0,goods_cat:""},goodsInfoRules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_cat:""},allCats:[],goodsPramas:[],goodsAttrs:[],fileList:[],previewDialog:!1,bigImg:"",config:{events:{initialized:function(){console.log("initialized")},"image.uploaded":function(e){var t=JSON.parse(e);return this.image.insert(t.data.url.replace("localhost:","localhost:8889"),!1,null,this.image.get(),t),!1}},requestHeaders:{Authorization:this.$store.state.token},imageUploadParam:"file",imageUploadURL:this.$baseURL+"upload",imageUploadMethod:"POST",charCounterCount:!1,toolbarBottom:!1},model:"Edit Your Content Here!",fileinfo:"",clipDialog:!1,showFileStatus:!1}},methods:{handleCropper:function(){var e=this;this.$refs.croppers.getCropBlob(function(){var t=Object(a.a)(regeneratorRuntime.mark((function t(r){var o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=new FormData).append("file",new File([r],e.fileinfo.name,{type:e.fileinfo.raw.type})),t.next=4,e.$apis.upload(o);case 4:n=t.sent,console.log(n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleTabClick:function(e){var t=this;return Object(a.a)(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.actived=+e.index+1,1!=e.index){r.next=13;break}if(3==t.goodsInfo.goods_cat.length){r.next=6;break}t.$message({type:"error",message:"请选择三级分类"}),r.next=11;break;case 6:return r.next=8,t.$apis.getGoodsAttrs(t.goodsInfo.goods_cat[t.goodsInfo.goods_cat.length-1],"many");case 8:(o=r.sent).map((function(e){e.attr_vals=e.attr_vals.split(",")})),t.goodsPramas=o;case 11:r.next=23;break;case 13:if(2!=e.index){r.next=23;break}if(3==t.goodsInfo.goods_cat.length){r.next=18;break}t.$message({type:"error",message:"请选择三级分类"}),r.next=23;break;case 18:return r.next=20,t.$apis.getGoodsAttrs(t.goodsInfo.goods_cat[t.goodsInfo.goods_cat.length-1],"only");case 20:n=r.sent,t.goodsAttrs=n,console.log(n);case 23:case"end":return r.stop()}}),r)})))()},getAllCats:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$apis.getAllCats();case 2:r=t.sent,e.allCats=r;case 4:case"end":return t.stop()}}),t)})))()},handleChange:function(e){var t=this;return Object(a.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:3!=e.length&&(t.goodsInfo.goods_cat=[]);case 1:case"end":return r.stop()}}),r)})))()},removeAttr:function(e,t){console.log(e),t.attr_vals.splice(e,1)},handlePreview:function(e){var t=e.url;this.previewDialog=!0,this.bigImg=t},handleRemove:function(e){var t=e.url,r=this.fileList.findIndex((function(e){return t===e.url}));this.fileList.splice(r,1)},handleSuccess:function(e){var t=e.data.url.replace("localhost:","localhost:8889");this.fileList.unshift({name:e.data.tmp_path,url:t})},handleProgress:function(e){e.url},changeUpload:function(e,t){var r=this;this.fileinfo=e,this.$nextTick((function(){r.showFileStatus=!1,r.option.img=e.url,r.clipDialog=!0}))},addGoods:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var r,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[],o=[],e.fileList.map((function(e){r.push({pic:e.name})})),e.goodsPramas.map((function(e){e.attr_vals.map((function(t){o.push({attr_id:e.attr_id,attr_value:t})}))})),e.goodsAttrs.map((function(e){o.push({attr_id:e.attr_id,attr_value:e.attr_vals})})),a=Object(n.a)(Object(n.a)({},e.goodsInfo),{},{goods_introduce:e.model,pics:r,attrs:o,goods_cat:e.goodsInfo.goods_cat.join(",")}),e.$refs.goodsInfo.validate((function(t){t&&e.$apis.addGoods(a)}));case 6:case"end":return t.stop()}}),t)})))()},initialize:function(e){this.initControls=e},blobToFile:function(e){var t="test."+e.type.split("/")[1];return new File([e],t,{lastModified:(new Date).getTime(),type:e.type})},upload:function(){var e=this;console.log(this.$refs.cropper),this.$refs.cropper.getCropBlob(function(){var t=Object(a.a)(regeneratorRuntime.mark((function t(r){var o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(r),(o=new FormData).append("file",e.blobToFile(r)),t.next=5,e.$apis.upload(o);case 5:n=t.sent,e.handleSuccess({data:n}),e.clipDialog=!1;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleClose:function(){this.showFileStatus=!0,this.fileList=Object(o.a)(this.fileList)},clipImg:function(){},changeScale:function(e){this.$refs.cropper.changeScale(e)},handleBeforeUpload:function(){return!1}},created:function(){this.getAllCats()}}),s=r("4ac2"),l=Object(s.a)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"add-goods"},[r("AdminBreadcrumb",{attrs:{breadcrumbs:e.breadcrumbs}}),r("el-alert",{staticStyle:{"margin-top":"30px"},attrs:{title:"添加商品信息",type:"info",center:"",closable:!1,"show-icon":""}}),r("el-steps",{attrs:{active:Number(e.actived),"align-center":"","finish-status":"success"}},[r("el-step",{attrs:{title:"基本信息"}}),r("el-step",{attrs:{title:"商品参数"}}),r("el-step",{attrs:{title:"商品属性"}}),r("el-step",{attrs:{title:"商品图片"}}),r("el-step",{attrs:{title:"商品内容"}})],1),r("el-tabs",{attrs:{"tab-position":"left"},on:{"tab-click":e.handleTabClick}},[r("el-tab-pane",{attrs:{label:"基本信息"}},[r("el-form",{ref:"goodsInfo",attrs:{"label-position":"top","label-width":"80px",model:e.goodsInfo,rules:e.goodsInfoRules}},[r("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[r("el-input",{model:{value:e.goodsInfo.goods_name,callback:function(t){e.$set(e.goodsInfo,"goods_name",t)},expression:"goodsInfo.goods_name"}})],1),r("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[r("el-input",{model:{value:e.goodsInfo.goods_price,callback:function(t){e.$set(e.goodsInfo,"goods_price",t)},expression:"goodsInfo.goods_price"}})],1),r("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[r("el-input",{model:{value:e.goodsInfo.goods_weight,callback:function(t){e.$set(e.goodsInfo,"goods_weight",t)},expression:"goodsInfo.goods_weight"}})],1),r("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[r("el-input",{model:{value:e.goodsInfo.goods_number,callback:function(t){e.$set(e.goodsInfo,"goods_number",t)},expression:"goodsInfo.goods_number"}})],1),r("el-form-item",{attrs:{label:"商品分类",prop:"goods_cat"}},[r("el-cascader",{ref:"cal",attrs:{options:e.allCats,props:{label:"cat_name",value:"cat_id"}},on:{change:e.handleChange},model:{value:e.goodsInfo.goods_cat,callback:function(t){e.$set(e.goodsInfo,"goods_cat",t)},expression:"goodsInfo.goods_cat"}})],1)],1)],1),r("el-tab-pane",{attrs:{label:"商品参数"}},[e._l(e.goodsPramas,(function(t){return[t.attr_vals.length>0?r("div",{key:t.attr_id},[r("h3",[e._v(e._s(t.attr_name))]),e._l(t.attr_vals,(function(o,n){return r("el-checkbox",{key:n,attrs:{checked:"",label:o,border:""},nativeOn:{click:function(r){return e.removeAttr(n,t)}}})}))],2):e._e()]}))],2),r("el-tab-pane",{attrs:{label:"商品属性"}},[r("el-form",{attrs:{"label-position":"top","label-width":"80px"}},e._l(e.goodsAttrs,(function(t){return r("el-form-item",{key:t.attr_id,attrs:{label:t.attr_name}},[r("el-input",{model:{value:t.attr_vals,callback:function(r){e.$set(t,"attr_vals",r)},expression:"item.attr_vals"}})],1)})),1)],1),r("el-tab-pane",{attrs:{label:"商品图片"}},[r("el-upload",{attrs:{action:e.$baseURL+"upload","on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"on-progress":e.handleProgress,"auto-upload":!1,"on-change":e.changeUpload,"show-file-list":e.showFileStatus,"before-upload":e.handleBeforeUpload,headers:{Authorization:e.$store.state.token},"file-list":e.fileList,"list-type":"picture"}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件，且不超过500kb ")])],1),r("el-dialog",{attrs:{title:"裁剪图片",visible:e.clipDialog},on:{close:e.handleClose,"update:visible":function(t){e.clipDialog=t}}},[r("div",[r("div",{staticStyle:{height:"400px"}},[r("vueCropper",{ref:"cropper",attrs:{img:e.option.img,outputSize:e.option.size,outputType:e.option.outputType,info:!0,full:e.option.full,canMove:e.option.canMove,canMoveBox:e.option.canMoveBox,original:e.option.original,autoCrop:e.option.autoCrop,fixed:e.option.fixed,fixedNumber:e.option.fixedNumber,centerBox:e.option.centerBox,infoTrue:e.option.infoTrue,enlarge:e.option.enlarge}})],1),r("div",[r("el-button",{attrs:{type:"primary",circle:""},on:{click:function(t){return e.changeScale(1)}}},[e._v("+")]),r("el-button",{attrs:{type:"primary",circle:""},on:{click:function(t){return e.changeScale(-1)}}},[e._v("-")])],1)]),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.clipDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.upload}},[e._v("确 定")])],1)])],1),r("el-tab-pane",{attrs:{label:"商品内容"}},[r("froala",{ref:"editor",attrs:{tag:"textarea",config:e.config},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}),r("el-button",{attrs:{type:"primary"},on:{click:e.addGoods}},[e._v("添加商品")])],1)],1),r("el-dialog",{attrs:{title:"",visible:e.previewDialog,width:"width"},on:{"update:visible":function(t){e.previewDialog=t}}},[r("div",[r("img",{attrs:{src:e.bigImg,alt:""}})]),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.previewDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.previewDialog=!1}}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{title:"",visible:e.clipDialogStatus},on:{"update:visible":function(t){e.clipDialogStatus=t}}},[r("div",{staticStyle:{height:"400px"}},[r("vueCropper",{ref:"croppers",attrs:{img:e.cropperOption.img,autoCrop:e.cropperOption.autoCrop}})],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.clipDialogStatus=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleCropper}},[e._v("确 定")])],1)])],1)}),[],!1,null,"a4157688",null);t.default=l.exports},e7e7:function(e,t,r){"use strict";function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}r.d(t,"a",(function(){return n}));r("7869"),r("1b18"),r("1e1b"),r("43c5"),r("9ee9"),r("5611"),r("08fc");r("9e79"),r("9113");function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},e7f4:function(e,t,r){e.exports=function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(e,t){switch(t){case"W":return e+"周";default:return e+"日"}},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(e,t){var r=100*e+t;return r<600?"凌晨":r<900?"早上":r<1100?"上午":r<1300?"中午":r<1800?"下午":"晚上"}};return e.locale(t,null,!0),t}(r("14726"))}}]);